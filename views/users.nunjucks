<!DOCTYPE html>
<html>
  <head>
    <title>Code Guild Card Grid</title>
    <meta charset="UTF-8">
    <meta name="description" content="User landing page up successful login">
    <link href="https://fonts.googleapis.com/css?family=Arimo:400,700|Source+Sans+Pro|Oswald" rel="stylesheet" type="text/css">
    <link rel="stylesheet prefetch" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/custom/user-landing-styles.css">
  </head>

  <body data-loggedinusername="{{ loggedInUser.username }}">
		<!-- Navbar for page -->
		<div id="navbar">
			<!-- Code Guild top left logo -->
			<h1 class="logo"><a href="/">CODE<span>GUILD</span></a></h1>

			<!-- Drop down w/ avatar photo top right corner -->
			<div class="dropdown">
          {% if loggedInUser.photo %}
   				  <img src="{{ loggedInUser.photo }}" class="avatar img-circle dropdown-toggle" data-toggle="dropdown" id="avatar-dropdown" aria-haspopup="true" aria-expanded="true" width="45">
          {% else %}
            <img src="https://pbs.twimg.com/profile_images/558109954561679360/j1f9DiJi.jpeg" class="avatar img-circle dropdown-toggle" data-toggle="dropdown" id="avatar-dropdown" aria-haspopup="true" aria-expanded="true" width="45">
          {% endif %}
  				<ul class="dropdown-menu dropdown-menu-right" aria-labelledby="avatar-dropdown">
					<li><a href="/users/{{loggedInUser.username}}/profile"><span class="glyphicon glyphicon-user"></span>  Profile</a></li>
					<li role="separator" class="divider"></li>
					<li><a href="/logout"><span class="glyphicon glyphicon-off"></span>  Logout</a></li>
				</ul>
			</div>
		</div>

		<!-- Start of container for cards -->
		<div id="container">
      {% for user in users %}
			<!-- Single card -->
			<div class="card" data-teacherusername="{{ user.username }}">

				<!-- Top section of card -->
				<div class="top">
					<!-- Profile pic / username section (left)-->
					<div class="user-info">
            {% if user.photo %}
						  <img class="img-circle" src="{{ user.photo }}" width="100">
            {% else %}
              <img class="img-circle" src="https://pbs.twimg.com/profile_images/558109954561679360/j1f9DiJi.jpeg" width="100">
            {% endif %}
						<hr>
						<span class="username">{{ user.username }}</span>
					</div>
					<!-- Availibility, Connect Session links, More Info Toggle (right) -->
					<div class="user-status">
						<!-- This should change based on user status -->
						<div class="status-container">
              {% if user.available %}
                <span class="status-text">Available</span>
                <span class="status-available"></span>
              {% else %}
                <span class="status-text">Unavailable</span>
                <span class="status-unavailable"></span>
              {% endif %}
						</div>
            {% if user.available %}
  						<div class="dropdown">
  						  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
  							Connect
  							<span class="caret"></span>
  						  </button>
  						  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                  <!-- Triggers socket event -->
    							<li><a class="session-request">Learn</a></li>
    							<li role="separator" class="divider"></li>
                  <!-- Triggers socket event -->
    							<li><a class="session-request">Review</a></li>
  						  </ul>
  						</div>
            {% endif %}
						<!-- Drop down menu -->
						<button class="info btn btn-primary" role="button" data-teacheruserid="{{ user.id }}">
							<span class="glyphicon glyphicon glyphicon-info-sign" aria-hidden="true"></span>
						</button>
					</div>
				</div>

				<!-- Middle section of card -->
				<div class="middle">
					<!-- Personal user bio -->
					<p>{{ user.bio }}</p>
				</div>

				<!-- Bottom section of card -->
				<div class="bottom">
					<!-- Table of topics user is interested in / excels at (left)-->
					<div class="topics">
						<table>
							<thead>
								<tr>
									<th>Interests</th>
								</tr>
							</thead>
							<tbody class="interests"></tbody>
						</table>
            <table>
							<thead>
								<tr>
									<th>Excels</th>
								</tr>
							</thead>
							<tbody class="excels"></tbody>
						</table>
					</div>
					<!-- List of links / glyphicons to a users personal pages (right) -->
					<div class="links"></div>
				</div>
			</div>
      {% endfor %}
		<!-- End of container for cards -->
		</div>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
		<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
		<script src="/js/custom/user-landing-script.js"></script>
    <script src="/js/custom/usersSocket.js"></script>
  </body>
</html>
